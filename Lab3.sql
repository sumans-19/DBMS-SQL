CREATE DATABASE COMPANY;
USE COMPANY;

CREATE TABLE EMPLOYEE(SSN INT PRIMARY KEY , FNAME VARCHAR2(20), LNAME VARCHAR2(20),ADDRESS VARCHAR2(20),GENDER VARCHAR2(20) , SALARY INT , SUPER_SSN INT REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE );
CREATE TABLE DEPARTMENTS(DNO INT PRIMARY KEY , DNAME VARCHAR2(20) , MGRSSN INT REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE , MGRSTARTDATE DATE);
CREATE TABLE DLOCATION(DNO INT REFERENCES DEPARTMENTS(DNO) ON DELETE CASCADE , DLOC VARCHAR(20) );
CREATE TABLE PROJECT(PNO INT PRIMARY KEY , PNAME VARCHAR2(20) , PLOCATION VARCHAR2(20) , DNO INT REFERENCES DEPARTMENTS(DNO) ON DELETE CASCADE);
CREATE TABLE WORKS_ON (SSN INT REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE  , PNO INT REFERENCES PROJECT(PNO) ON DELETE CASCADE, HOURS INT );

ALTER TABLE EMPLOYEE ADD DNO INT REFERENCES DEPARTMENTS(DNO) ON DELETE CASCADE ;


INSERT INTO EMPLOYEE VALUES(&SSN , '&FNAME','&LNAME'  , '&ADDRESS' , '&GENDER' , &SALARY , &SUPER_SSN );

INSERT INTO DEPARTMENTS VALUES(&DNO , '&DNAME' , &MGRSSN , '&MGRSTARTDATE');
UPDATE EMPLOYEE SET DNO=1 WHERE SSN=111 ;
UPDATE EMPLOYEE SET DNO=1 WHERE SSN=222 ;
UPDATE EMPLOYEE SET DNO=1 WHERE SSN=333 ;
UPDATE EMPLOYEE SET DNO=1 WHERE SSN=444 ;
UPDATE EMPLOYEE SET DNO=1 WHERE SSN=555 ;
UPDATE EMPLOYEE SET DNO=1 WHERE SSN=666 ;
UPDATE EMPLOYEE SET DNO=4 WHERE SSN=777 ;
UPDATE EMPLOYEE SET DNO=5 WHERE SSN=888 ;

INSERT INTO DLOCATION VALUES (&DNO , '&DLOC');
INSERT INTO PROJECT VALUES(&PNO , '&PNAME' , '&PLOCATION' , &DNO );
INSERT INTO WORKS_ON VALUES (&SSN , &PNO  , &HOURS );


